/*! For license information please see app.bundle.js.LICENSE.txt */
(()=>{"use strict";var t,e,n={931:(t,e,n)=>{n.d(e,{A:()=>r});const r={saveToken:function(t){sessionStorage.setItem("story-app-token",t)},getToken:function(){return sessionStorage.getItem("story-app-token")},removeToken:function(){sessionStorage.removeItem("story-app-token")},isLoggedIn:function(){return!!this.getToken()}}}},r={};function o(t){var e=r[t];if(void 0!==e)return e.exports;var i=r[t]={exports:{}};return n[t](i,i.exports,o),i.exports}o.m=n,o.d=(t,e)=>{for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.f={},o.e=t=>Promise.all(Object.keys(o.f).reduce((e,n)=>(o.f[n](t,e),e),[])),o.u=t=>t+".bundle.js",o.miniCssF=t=>{},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),t={},e="story-apps:",o.l=(n,r,i,a)=>{if(t[n])t[n].push(r);else{var c,u;if(void 0!==i)for(var s=document.getElementsByTagName("script"),f=0;f<s.length;f++){var l=s[f];if(l.getAttribute("src")==n||l.getAttribute("data-webpack")==e+i){c=l;break}}c||(u=!0,(c=document.createElement("script")).charset="utf-8",o.nc&&c.setAttribute("nonce",o.nc),c.setAttribute("data-webpack",e+i),c.src=n),t[n]=[r];var d=(e,r)=>{c.onerror=c.onload=null,clearTimeout(p);var o=t[n];if(delete t[n],c.parentNode&&c.parentNode.removeChild(c),o&&o.forEach(t=>t(r)),e)return e(r)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:c}),12e4);c.onerror=d.bind(null,c.onerror),c.onload=d.bind(null,c.onload),u&&document.head.appendChild(c)}},o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.p="/story-app/",(()=>{var t={524:0};o.f.j=(e,n)=>{var r=o.o(t,e)?t[e]:void 0;if(0!==r)if(r)n.push(r[2]);else{var i=new Promise((n,o)=>r=t[e]=[n,o]);n.push(r[2]=i);var a=o.p+o.u(e),c=new Error;o.l(a,n=>{if(o.o(t,e)&&(0!==(r=t[e])&&(t[e]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;c.message="Loading chunk "+e+" failed.\n("+i+": "+a+")",c.name="ChunkLoadError",c.type=i,c.request=a,r[1](c)}},"chunk-"+e,e)}};var e=(e,n)=>{var r,i,[a,c,u]=n,s=0;if(a.some(e=>0!==t[e])){for(r in c)o.o(c,r)&&(o.m[r]=c[r]);u&&u(o)}for(e&&e(n);s<a.length;s++)i=a[s],o.o(t,i)&&t[i]&&t[i][0](),t[i]=0},n=self.webpackChunkstory_apps=self.webpackChunkstory_apps||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})();const i={parseActiveUrlWithCombiner:function(){var t=window.location.hash.slice(1).toLowerCase(),e=this._urlSplitter(t);return this._urlCombiner(e)},parseActiveUrlWithoutCombiner:function(){var t=window.location.hash.slice(1).toLowerCase();return this._urlSplitter(t)},_urlSplitter:function(t){var e=t.split("/");return{resource:e[1]||null,id:e[2]||null,verb:e[3]||null}},_urlCombiner:function(t){return(t.resource?"/".concat(t.resource):"/")+(t.id?"/:id":"")+(t.verb?"/".concat(t.verb):"")}},a="https://story-api.dicoding.dev/v1";var c=o(931);function u(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof c?r:c,f=Object.create(u.prototype);return s(f,"_invoke",function(n,r,o){var i,c,u,s=0,f=o||[],l=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return i=e,c=0,u=t,d.n=n,a}};function p(n,r){for(c=n,u=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],p=d.p,v=i[2];n>3?(o=v===r)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=p&&((o=n<2&&p<i[1])?(c=0,d.v=r,d.n=i[1]):p<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,d.n=v,c=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&p(f,v),c=f,u=v;(e=c<2?t:u)||!l;){i||(c?c<3?(c>1&&(d.n=-1),p(c,u)):d.n=u:d.v=u);try{if(s=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(l=d.n<0)?u:n.call(r,d))!==a)break}catch(e){i=t,c=1,u=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),f}var a={};function c(){}function f(){}function l(){}e=Object.getPrototypeOf;var d=[][r]?e(e([][r]())):(s(e={},r,function(){return this}),e),p=l.prototype=c.prototype=Object.create(d);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,s(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return f.prototype=l,s(p,"constructor",l),s(l,"constructor",f),f.displayName="GeneratorFunction",s(l,o,"GeneratorFunction"),s(p),s(p,o,"Generator"),s(p,r,function(){return this}),s(p,"toString",function(){return"[object Generator]"}),(u=function(){return{w:i,m:v}})()}function s(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}s=function(t,e,n,r){function i(e,n){s(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},s(t,e,n,r)}function f(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function l(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){f(i,r,o,a,c,"next",t)}function c(t){f(i,r,o,a,c,"throw",t)}a(void 0)})}}const d=function(t){return l(u().m(function e(){var n,r,o,i;return u().w(function(e){for(;;)switch(e.n){case 0:return n=t.name,r=t.email,o=t.password,e.n=1,fetch("".concat(a,"/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n,email:r,password:o})});case 1:return i=e.v,e.a(2,i.json())}},e)}))()},p=function(t){return l(u().m(function e(){var n,r,o;return u().w(function(e){for(;;)switch(e.n){case 0:return n=t.email,r=t.password,e.n=1,fetch("".concat(a,"/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:r})});case 1:return o=e.v,e.a(2,o.json())}},e)}))()},v=function(){return l(u().m(function t(){var e,n;return u().w(function(t){for(;;)switch(t.n){case 0:if(e=c.A.getToken()){t.n=1;break}return t.a(2,Promise.reject(new Error("User not authenticated")));case 1:return t.n=2,fetch("".concat(a,"/stories?location=1"),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}});case 2:return n=t.v,t.a(2,n.json())}},t)}))()},y=function(t){return l(u().m(function e(){var n,r;return u().w(function(e){for(;;)switch(e.n){case 0:if(n=c.A.getToken()){e.n=1;break}return e.a(2,Promise.reject(new Error("User not authenticated")));case 1:return e.n=2,fetch("".concat(a,"/stories"),{method:"POST",headers:{Authorization:"Bearer ".concat(n)},body:t});case 2:return r=e.v,e.a(2,r.json())}},e)}))()},m=function(t){return new Date(t).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})},h=function(t,e){var n=t.nextElementSibling;n&&n.classList.contains("form-error")||((n=document.createElement("div")).className="form-error",t.parentNode.insertBefore(n,t.nextSibling)),n.textContent=e,t.classList.add("is-invalid")},b=function(t){var e=t.nextElementSibling;e&&e.classList.contains("form-error")&&(e.textContent="",t.classList.remove("is-invalid"))},g=(t,e)=>e.some(e=>t instanceof e);let w,k;const S=new WeakMap,j=new WeakMap,O=new WeakMap;let _={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return S.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return E(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function T(t){_=t(_)}function P(t){return"function"==typeof t?(e=t,(k||(k=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(G(this),t),E(this.request)}:function(...t){return E(e.apply(G(this),t))}):(t instanceof IDBTransaction&&function(t){if(S.has(t))return;const e=new Promise((e,n)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",i),t.removeEventListener("abort",i)},o=()=>{e(),r()},i=()=>{n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",i),t.addEventListener("abort",i)});S.set(t,e)}(t),g(t,w||(w=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,_):t);var e}function E(t){if(t instanceof IDBRequest)return function(t){const e=new Promise((e,n)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",i)},o=()=>{e(E(t.result)),r()},i=()=>{n(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",i)});return O.set(e,t),e}(t);if(j.has(t))return j.get(t);const e=P(t);return e!==t&&(j.set(t,e),O.set(e,t)),e}const G=t=>O.get(t),x=["get","getKey","getAll","getAllKeys","count"],F=["put","add","delete","clear"],q=new Map;function C(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(q.get(e))return q.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=F.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!x.includes(n))return;const i=async function(t,...e){const i=this.transaction(t,o?"readwrite":"readonly");let a=i.store;return r&&(a=a.index(e.shift())),(await Promise.all([a[n](...e),o&&i.done]))[0]};return q.set(e,i),i}T(t=>({...t,get:(e,n,r)=>C(e,n)||t.get(e,n,r),has:(e,n)=>!!C(e,n)||t.has(e,n)}));const D=["continue","continuePrimaryKey","advance"],A={},I=new WeakMap,B=new WeakMap,N={get(t,e){if(!D.includes(e))return t[e];let n=A[e];return n||(n=A[e]=function(...t){I.set(this,B.get(this)[e](...t))}),n}};async function*M(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;const n=new Proxy(e,N);for(B.set(n,e),O.set(n,G(e));e;)yield n,e=await(I.get(n)||e.continue()),I.delete(n)}function W(t,e){return e===Symbol.asyncIterator&&g(t,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===e&&g(t,[IDBIndex,IDBObjectStore])}function R(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return U(s,"_invoke",function(n,r,o){var i,c,u,s=0,f=o||[],l=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return i=e,c=0,u=t,d.n=n,a}};function p(n,r){for(c=n,u=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],p=d.p,v=i[2];n>3?(o=v===r)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=p&&((o=n<2&&p<i[1])?(c=0,d.v=r,d.n=i[1]):p<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,d.n=v,c=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&p(f,v),c=f,u=v;(e=c<2?t:u)||!l;){i||(c?c<3?(c>1&&(d.n=-1),p(c,u)):d.n=u:d.v=u);try{if(s=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(l=d.n<0)?u:n.call(r,d))!==a)break}catch(e){i=t,c=1,u=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(U(e={},r,function(){return this}),e),l=s.prototype=c.prototype=Object.create(f);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,U(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return u.prototype=s,U(l,"constructor",s),U(s,"constructor",u),u.displayName="GeneratorFunction",U(s,o,"GeneratorFunction"),U(l),U(l,o,"Generator"),U(l,r,function(){return this}),U(l,"toString",function(){return"[object Generator]"}),(R=function(){return{w:i,m:d}})()}function U(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}U=function(t,e,n,r){function i(e,n){U(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},U(t,e,n,r)}function H(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function V(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){H(i,r,o,a,c,"next",t)}function c(t){H(i,r,o,a,c,"throw",t)}a(void 0)})}}T(t=>({...t,get:(e,n,r)=>W(e,n)?M:t.get(e,n,r),has:(e,n)=>W(e,n)||t.has(e,n)}));var K="favorite-stories",z=function(t,e,{blocked:n,upgrade:r,blocking:o,terminated:i}={}){const a=indexedDB.open(t,e),c=E(a);return r&&a.addEventListener("upgradeneeded",t=>{r(E(a.result),t.oldVersion,t.newVersion,E(a.transaction),t)}),n&&a.addEventListener("blocked",t=>n(t.oldVersion,t.newVersion,t)),c.then(t=>{i&&t.addEventListener("close",()=>i()),o&&t.addEventListener("versionchange",t=>o(t.oldVersion,t.newVersion,t))}).catch(()=>{}),c}("story-app-db",1,{upgrade:function(t){t.objectStoreNames.contains(K)||t.createObjectStore(K,{keyPath:"id"})}});const J=function(t){return V(R().m(function e(){return R().w(function(e){for(;;)switch(e.n){case 0:if(t.id){e.n=1;break}return e.a(2);case 1:return e.n=2,z;case 2:return e.a(2,e.v.put(K,t))}},e)}))()},$=function(){return V(R().m(function t(){return R().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,z;case 1:return t.a(2,t.v.getAll(K))}},t)}))()},Q=function(t){return V(R().m(function e(){return R().w(function(e){for(;;)switch(e.n){case 0:if(t){e.n=1;break}return e.a(2);case 1:return e.n=2,z;case 2:return e.a(2,e.v.delete(K,t))}},e)}))()};function X(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return Y(s,"_invoke",function(n,r,o){var i,c,u,s=0,f=o||[],l=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return i=e,c=0,u=t,d.n=n,a}};function p(n,r){for(c=n,u=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],p=d.p,v=i[2];n>3?(o=v===r)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=p&&((o=n<2&&p<i[1])?(c=0,d.v=r,d.n=i[1]):p<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,d.n=v,c=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&p(f,v),c=f,u=v;(e=c<2?t:u)||!l;){i||(c?c<3?(c>1&&(d.n=-1),p(c,u)):d.n=u:d.v=u);try{if(s=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(l=d.n<0)?u:n.call(r,d))!==a)break}catch(e){i=t,c=1,u=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(Y(e={},r,function(){return this}),e),l=s.prototype=c.prototype=Object.create(f);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Y(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return u.prototype=s,Y(l,"constructor",s),Y(s,"constructor",u),u.displayName="GeneratorFunction",Y(s,o,"GeneratorFunction"),Y(l),Y(l,o,"Generator"),Y(l,r,function(){return this}),Y(l,"toString",function(){return"[object Generator]"}),(X=function(){return{w:i,m:d}})()}function Y(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Y=function(t,e,n,r){function i(e,n){Y(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},Y(t,e,n,r)}function Z(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function tt(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){Z(i,r,o,a,c,"next",t)}function c(t){Z(i,r,o,a,c,"throw",t)}a(void 0)})}}var et={render:function(){return tt(X().m(function t(){return X().w(function(t){for(;;)if(0===t.n)return t.a(2,'\n      <section class="home-container">\n        <div class="story-list-container">\n          <h1>Stories</h1>\n          <div id="story-list" class="story-list">\n            <p>Memuat cerita...</p>\n          </div>\n        </div>\n        <div class="map-container">\n          <h2>Stories Location</h2>\n          <div id="map"></div>\n        </div>\n      </section>\n    ')},t)}))()},afterRender:function(){var t=this;return tt(X().m(function e(){var n,r,o,i,a,u;return X().w(function(e){for(;;)switch(e.p=e.n){case 0:if(c.A.isLoggedIn()){e.n=1;break}return window.location.hash="#/login",e.a(2);case 1:return n=document.querySelector("#story-list"),r=L.map("map").setView([-2.548926,118.0148634],5),L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(r),o={},e.p=2,e.n=3,v();case 3:if(!(i=e.v).error){e.n=4;break}throw new Error(i.message);case 4:if(n.innerHTML="",a=i.listStory,t._stories=a,0!==a.length){e.n=5;break}return n.innerHTML="<p>Belum ada cerita yang tersedia.</p>",e.a(2);case 5:a.forEach(function(t){if(t.lat&&t.lon){var e=document.createElement("article");e.className="story-item",e.dataset.lat=t.lat,e.dataset.lon=t.lon,e.dataset.id=t.id,e.innerHTML='\n            <img src="'.concat(t.photoUrl,'" alt="Foto ').concat(t.name,'" class="story-item__image">\n            <div class="story-item__content">\n              <h3 class="story-item__author">').concat(t.name,'</h3>\n              <p class="story-item__date">').concat(m(t.createdAt),'</p>\n              <p class="story-item__description">').concat(t.description.substring(0,100),'...</p>\n              \n              <button class="btn favorite-btn" data-id="').concat(t.id,'">\n                Simpan ke Favorit\n              </button>\n            </div>\n          '),n.appendChild(e);var i=L.marker([t.lat,t.lon]).addTo(r).bindPopup("<b>".concat(t.name,"</b><br>").concat(t.description.substring(0,50),"..."));o[t.id]=i}}),t._initListMapSync(r,o),t._addFavoriteButtonListeners(),e.n=7;break;case 6:e.p=6,u=e.v,n.innerHTML='<p style="color: red;">Gagal memuat cerita: '.concat(u.message,"</p>");case 7:return e.a(2)}},e,null,[[2,6]])}))()},_initListMapSync:function(t,e){document.querySelectorAll(".story-item").forEach(function(n){n.addEventListener("click",function(){var r=n.dataset.lat,o=n.dataset.lon,i=n.dataset.id;t.flyTo([r,o],13),e[i]&&e[i].openPopup()})})},_addFavoriteButtonListeners:function(){var t=this;document.querySelectorAll(".favorite-btn").forEach(function(e){e.addEventListener("click",function(){var e=tt(X().m(function e(n){var r,o;return X().w(function(e){for(;;)switch(e.n){case 0:if(n.stopPropagation(),r=n.target.dataset.id,!(o=t._stories.find(function(t){return t.id===r}))){e.n=2;break}return e.n=1,J(o);case 1:alert("'".concat(o.name,"' berhasil disimpan ke favorit!")),e.n=3;break;case 2:console.error("Data cerita tidak ditemukan untuk ID:",r);case 3:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}())})}};function nt(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return rt(s,"_invoke",function(n,r,o){var i,c,u,s=0,f=o||[],l=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return i=e,c=0,u=t,d.n=n,a}};function p(n,r){for(c=n,u=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],p=d.p,v=i[2];n>3?(o=v===r)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=p&&((o=n<2&&p<i[1])?(c=0,d.v=r,d.n=i[1]):p<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,d.n=v,c=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&p(f,v),c=f,u=v;(e=c<2?t:u)||!l;){i||(c?c<3?(c>1&&(d.n=-1),p(c,u)):d.n=u:d.v=u);try{if(s=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(l=d.n<0)?u:n.call(r,d))!==a)break}catch(e){i=t,c=1,u=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(rt(e={},r,function(){return this}),e),l=s.prototype=c.prototype=Object.create(f);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,rt(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return u.prototype=s,rt(l,"constructor",s),rt(s,"constructor",u),u.displayName="GeneratorFunction",rt(s,o,"GeneratorFunction"),rt(l),rt(l,o,"Generator"),rt(l,r,function(){return this}),rt(l,"toString",function(){return"[object Generator]"}),(nt=function(){return{w:i,m:d}})()}function rt(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}rt=function(t,e,n,r){function i(e,n){rt(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},rt(t,e,n,r)}function ot(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function it(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){ot(i,r,o,a,c,"next",t)}function c(t){ot(i,r,o,a,c,"throw",t)}a(void 0)})}}function at(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return ct(s,"_invoke",function(n,r,o){var i,c,u,s=0,f=o||[],l=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return i=e,c=0,u=t,d.n=n,a}};function p(n,r){for(c=n,u=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],p=d.p,v=i[2];n>3?(o=v===r)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=p&&((o=n<2&&p<i[1])?(c=0,d.v=r,d.n=i[1]):p<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,d.n=v,c=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&p(f,v),c=f,u=v;(e=c<2?t:u)||!l;){i||(c?c<3?(c>1&&(d.n=-1),p(c,u)):d.n=u:d.v=u);try{if(s=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(l=d.n<0)?u:n.call(r,d))!==a)break}catch(e){i=t,c=1,u=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(ct(e={},r,function(){return this}),e),l=s.prototype=c.prototype=Object.create(f);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,ct(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return u.prototype=s,ct(l,"constructor",s),ct(s,"constructor",u),u.displayName="GeneratorFunction",ct(s,o,"GeneratorFunction"),ct(l),ct(l,o,"Generator"),ct(l,r,function(){return this}),ct(l,"toString",function(){return"[object Generator]"}),(at=function(){return{w:i,m:d}})()}function ct(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}ct=function(t,e,n,r){function i(e,n){ct(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},ct(t,e,n,r)}function ut(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function st(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){ut(i,r,o,a,c,"next",t)}function c(t){ut(i,r,o,a,c,"throw",t)}a(void 0)})}}function ft(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return lt(s,"_invoke",function(n,r,o){var i,c,u,s=0,f=o||[],l=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return i=e,c=0,u=t,d.n=n,a}};function p(n,r){for(c=n,u=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],p=d.p,v=i[2];n>3?(o=v===r)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=p&&((o=n<2&&p<i[1])?(c=0,d.v=r,d.n=i[1]):p<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,d.n=v,c=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&p(f,v),c=f,u=v;(e=c<2?t:u)||!l;){i||(c?c<3?(c>1&&(d.n=-1),p(c,u)):d.n=u:d.v=u);try{if(s=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(l=d.n<0)?u:n.call(r,d))!==a)break}catch(e){i=t,c=1,u=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(lt(e={},r,function(){return this}),e),l=s.prototype=c.prototype=Object.create(f);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,lt(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return u.prototype=s,lt(l,"constructor",s),lt(s,"constructor",u),u.displayName="GeneratorFunction",lt(s,o,"GeneratorFunction"),lt(l),lt(l,o,"Generator"),lt(l,r,function(){return this}),lt(l,"toString",function(){return"[object Generator]"}),(ft=function(){return{w:i,m:d}})()}function lt(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}lt=function(t,e,n,r){function i(e,n){lt(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},lt(t,e,n,r)}function dt(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function pt(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){dt(i,r,o,a,c,"next",t)}function c(t){dt(i,r,o,a,c,"throw",t)}a(void 0)})}}function vt(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return yt(s,"_invoke",function(n,r,o){var i,c,u,s=0,f=o||[],l=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return i=e,c=0,u=t,d.n=n,a}};function p(n,r){for(c=n,u=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],p=d.p,v=i[2];n>3?(o=v===r)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=p&&((o=n<2&&p<i[1])?(c=0,d.v=r,d.n=i[1]):p<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,d.n=v,c=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&p(f,v),c=f,u=v;(e=c<2?t:u)||!l;){i||(c?c<3?(c>1&&(d.n=-1),p(c,u)):d.n=u:d.v=u);try{if(s=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(l=d.n<0)?u:n.call(r,d))!==a)break}catch(e){i=t,c=1,u=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(yt(e={},r,function(){return this}),e),l=s.prototype=c.prototype=Object.create(f);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,yt(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return u.prototype=s,yt(l,"constructor",s),yt(s,"constructor",u),u.displayName="GeneratorFunction",yt(s,o,"GeneratorFunction"),yt(l),yt(l,o,"Generator"),yt(l,r,function(){return this}),yt(l,"toString",function(){return"[object Generator]"}),(vt=function(){return{w:i,m:d}})()}function yt(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}yt=function(t,e,n,r){function i(e,n){yt(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},yt(t,e,n,r)}function mt(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function ht(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){mt(i,r,o,a,c,"next",t)}function c(t){mt(i,r,o,a,c,"throw",t)}a(void 0)})}}function bt(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return gt(s,"_invoke",function(n,r,o){var i,c,u,s=0,f=o||[],l=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return i=e,c=0,u=t,d.n=n,a}};function p(n,r){for(c=n,u=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],p=d.p,v=i[2];n>3?(o=v===r)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=p&&((o=n<2&&p<i[1])?(c=0,d.v=r,d.n=i[1]):p<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,d.n=v,c=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&p(f,v),c=f,u=v;(e=c<2?t:u)||!l;){i||(c?c<3?(c>1&&(d.n=-1),p(c,u)):d.n=u:d.v=u);try{if(s=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(l=d.n<0)?u:n.call(r,d))!==a)break}catch(e){i=t,c=1,u=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(gt(e={},r,function(){return this}),e),l=s.prototype=c.prototype=Object.create(f);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,gt(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return u.prototype=s,gt(l,"constructor",s),gt(s,"constructor",u),u.displayName="GeneratorFunction",gt(s,o,"GeneratorFunction"),gt(l),gt(l,o,"Generator"),gt(l,r,function(){return this}),gt(l,"toString",function(){return"[object Generator]"}),(bt=function(){return{w:i,m:d}})()}function gt(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}gt=function(t,e,n,r){function i(e,n){gt(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},gt(t,e,n,r)}function wt(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function kt(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){wt(i,r,o,a,c,"next",t)}function c(t){wt(i,r,o,a,c,"throw",t)}a(void 0)})}}const St={"/":et,"/home":et,"/about":{render:function(){return it(nt().m(function t(){return nt().w(function(t){for(;;)if(0===t.n)return t.a(2,'\n      <section class="about-container">\n        <h1>About</h1>\n        <p>\n          Story App adalah platform berbagi cerita inovatif di mana pengguna dapat memposting cerita pendek mereka dan menandai lokasi di peta. \n          Aplikasi ini dibuat sebagai contoh penerapan arsitektur Single-Page Application (SPA), integrasi API, visualisasi peta dengan Leaflet, dan \n          prinsip-prinsip aksesibilitas web.\n        </p> \n        <br>\n\n        <hr />\n        \n        <br>\n        <h2>Features :</h2>\n          <ul>\n          <br><li><strong>SPA:</strong> Navigasi cepat tanpa reload halaman.</li>\n          <br><li><strong>Peta Interaktif:</strong> Lihat lokasi cerita di seluruh dunia secara real-time.</li>\n          <br><li><strong>Tambah Cerita:</strong> Bagikan ceritamu dengan foto dan lokasi terkini.</li>\n          <br><li><strong>Responsif:</strong> Tampilan optimal di desktop, tablet, dan mobile.</li>\n          </ul>\n      </section>\n    ')},t)}))()},afterRender:function(){return it(nt().m(function t(){return nt().w(function(t){for(;;)if(0===t.n)return t.a(2)},t)}))()}},"/login":{render:function(){return st(at().m(function t(){return at().w(function(t){for(;;)if(0===t.n)return t.a(2,'\n      <div class="auth-container">\n        <h1>Login Akun</h1>\n        <form id="login-form">\n          <div class="form-group">\n            <label for="email">Email</label>\n            <input type="email" id="email" class="form-control" required>\n          </div>\n          <div class="form-group">\n            <label for="password">Password</label>\n            <input type="password" id="password" class="form-control" required minlength="8">\n          </div>\n          \n          <button type="submit" id="submit-button" class="btn btn-primary" style="width: 100%;">\n            Login\n          </button>\n          \n        </form>\n        <div class="redirect-link">\n          <p>Belum punya akun? <a href="#/register" style="color: #FFD600;">Daftar di sini</a></p>\n        </div>\n        <div id="error-message" class="form-error" style="text-align: center; margin-top: 1rem;"></div>\n      </div>\n    ')},t)}))()},afterRender:function(){return st(at().m(function t(){var e,n,r,o,i;return at().w(function(t){for(;;)switch(t.n){case 0:e=document.querySelector("#login-form"),n=document.querySelector("#email"),r=document.querySelector("#password"),o=document.querySelector("#error-message"),i=document.querySelector("#submit-button"),e.addEventListener("submit",function(){var t=st(at().m(function t(e){var a,u,s,f;return at().w(function(t){for(;;)switch(t.p=t.n){case 0:return e.preventDefault(),b(o),i.classList.add("loading"),i.disabled=!0,a=n.value,u=r.value,t.p=1,t.n=2,p({email:a,password:u});case 2:if(!(s=t.v).error){t.n=3;break}throw new Error(s.message);case 3:c.A.saveToken(s.loginResult.token),document.querySelector("app-bar").render(),window.location.hash="#/home",t.n=5;break;case 4:t.p=4,f=t.v,o.textContent="Login Gagal: ".concat(f.message),i.classList.remove("loading"),i.disabled=!1;case 5:return t.a(2)}},t,null,[[1,4]])}));return function(e){return t.apply(this,arguments)}}());case 1:return t.a(2)}},t)}))()}},"/register":{render:function(){return pt(ft().m(function t(){return ft().w(function(t){for(;;)if(0===t.n)return t.a(2,'\n      <div class="auth-container">\n        <h1>Daftar Akun Baru</h1>\n        <form id="register-form">\n          <div class="form-group">\n            <label for="name">Nama</label>\n            <input type="text" id="name" class="form-control" required>\n          </div>\n          <div class="form-group">\n            <label for="email">Email</label>\n            <input type="email" id="email" class="form-control" required>\n          </div>\n          <div class="form-group">\n            <label for="password">Password</label>\n            <input type="password" id="password" class="form-control" required minlength="8">\n          </div>\n          \n          <button type="submit" id="submit-button" class="btn btn-primary" style="width: 100%;">\n            Daftar\n          </button>\n          \n        </form>\n        <div class="redirect-link">\n          <p>Sudah punya akun? <a href="#/login" style= "color: #FFD600;">Login di sini</a></p>\n        </div>\n        <div id="error-message" class="form-error" style="text-align: center; margin-top: 1rem;"></div>\n      </div>\n    ')},t)}))()},afterRender:function(){return pt(ft().m(function t(){var e,n,r,o,i,a;return ft().w(function(t){for(;;)switch(t.n){case 0:e=document.querySelector("#register-form"),n=document.querySelector("#name"),r=document.querySelector("#email"),o=document.querySelector("#password"),i=document.querySelector("#error-message"),a=document.querySelector("#submit-button"),e.addEventListener("submit",function(){var t=pt(ft().m(function t(e){var c,u,s,f,l;return ft().w(function(t){for(;;)switch(t.p=t.n){case 0:return e.preventDefault(),i.textContent="",a.classList.add("loading"),a.disabled=!0,c=n.value,u=r.value,s=o.value,t.p=1,t.n=2,d({name:c,email:u,password:s});case 2:if(!(f=t.v).error){t.n=3;break}throw new Error(f.message);case 3:alert("Registrasi berhasil! Silakan login."),window.location.hash="#/login",t.n=5;break;case 4:t.p=4,l=t.v,i.textContent="Registrasi Gagal: ".concat(l.message),a.classList.remove("loading"),a.disabled=!1;case 5:return t.a(2)}},t,null,[[1,4]])}));return function(e){return t.apply(this,arguments)}}());case 1:return t.a(2)}},t)}))()}},"/add-story":{render:function(){return ht(vt().m(function t(){return vt().w(function(t){for(;;)if(0===t.n)return t.a(2,'\n      <section class="add-story-container">\n        <h1>Tambah Cerita Baru</h1>\n        <form id="add-story-form">\n          \n          <div class="form-group">\n            <label for="photo">Upload Foto (Wajib)</label>\n            <input type="file" id="photo" class="form-control" accept="image/*" required>\n            <img id="preview-image" src="#" alt="Pratinjau gambar yang diupload">\n          </div>\n          \n          <div class="form-group">\n            <label for="description">Deskripsi (Wajib)</label>\n            <textarea id="description" class="form-control" rows="5" required></textarea>\n          </div>\n          \n          <div class="form-group">\n            <label>Pilih Lokasi (Wajib)</label>\n            <p class="location-picker-info">Klik pada peta untuk memilih lokasi cerita Anda.</p>\n            <div id="add-map"></div>\n          </div>\n          \n          <input type="hidden" id="latitude" name="lat">\n          <input type="hidden" id="longitude" name="lon">\n          \n          <div id="error-message" class="form-error" style="margin-bottom: 1rem;"></div>\n          \n          <button type="submit" id="submit-button" class="btn btn-primary" style="width: 100%;">\n            Upload Cerita\n          </button>\n        </form>\n      </section>\n    ')},t)}))()},afterRender:function(){var t=this;return ht(vt().m(function e(){var n,r,o,i,a,u,s,f,l;return vt().w(function(e){for(;;)switch(e.n){case 0:if(c.A.isLoggedIn()){e.n=1;break}return window.location.hash="#/login",e.a(2);case 1:n=L.map("add-map").setView([-2.548926,118.0148634],5),L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(n),r=null,o=document.querySelector("#latitude"),i=document.querySelector("#longitude"),n.on("click",function(t){var e=t.latlng,a=e.lat,c=e.lng;o.value=a,i.value=c,r&&n.removeLayer(r),r=L.marker([a,c]).addTo(n).bindPopup("Lokasi cerita dipilih").openPopup(),b(document.querySelector("#add-map"))}),a=document.querySelector("#photo"),u=document.querySelector("#preview-image"),a.addEventListener("change",function(){b(a);var t=a.files[0];t&&(u.src=URL.createObjectURL(t),u.style.display="block")}),s=document.querySelector("#add-story-form"),f=document.querySelector("#submit-button"),l=document.querySelector("#error-message"),s.addEventListener("submit",function(){var e=ht(vt().m(function e(n){var r,o,i;return vt().w(function(e){for(;;)switch(e.p=e.n){case 0:if(n.preventDefault(),t._validateForm()){e.n=1;break}return e.a(2);case 1:return f.classList.add("loading"),f.disabled=!0,l.textContent="",(r=new FormData).append("photo",document.querySelector("#photo").files[0]),r.append("description",document.querySelector("#description").value),r.append("lat",document.querySelector("#latitude").value),r.append("lon",document.querySelector("#longitude").value),e.p=2,e.n=3,y(r);case 3:if(!(o=e.v).error){e.n=4;break}throw new Error(o.message);case 4:alert("Cerita berhasil diupload!"),window.location.hash="#/home",e.n=6;break;case 5:e.p=5,i=e.v,l.textContent="Error: ".concat(i.message),f.classList.remove("loading"),f.disabled=!1;case 6:return e.a(2)}},e,null,[[2,5]])}));return function(t){return e.apply(this,arguments)}}());case 2:return e.a(2)}},e)}))()},_validateForm:function(){var t=!0,e=document.querySelector("#photo"),n=document.querySelector("#description"),r=document.querySelector("#latitude"),o=document.querySelector("#add-map");return b(e),b(n),b(o),0===e.files.length&&(h(e,"Foto tidak boleh kosong."),t=!1),""===n.value.trim()&&(h(n,"Deskripsi tidak boleh kosong."),t=!1),""===r.value&&(h(o,"Silakan pilih lokasi di peta."),t=!1),t}},"/favorites":{render:function(){return kt(bt().m(function t(){return bt().w(function(t){for(;;)if(0===t.n)return t.a(2,'\n      <section class="favorites-container">\n        <h1>Cerita Favorit Anda</h1>\n        \n        <div class="search-container form-group">\n          <label for="search-favorite">Cari Favorit</label>\n          <input type="search" id="search-favorite" class="form-control" placeholder="Ketik nama...">\n        </div>\n        \n        <div id="favorite-list" class="story-list">\n          <p>Memuat cerita favorit...</p>\n        </div>\n      </section>\n    ')},t)}))()},afterRender:function(){var t=this;return kt(bt().m(function e(){return bt().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,$();case 1:t._allStories=e.v,t._renderList(t._allStories),document.querySelector("#search-favorite").addEventListener("input",function(e){var n=e.target.value.toLowerCase(),r=t._allStories.filter(function(t){return t.name.toLowerCase().includes(n)});t._renderList(r)});case 2:return e.a(2)}},e)}))()},_renderList:function(t){var e=document.querySelector("#favorite-list");e.innerHTML="",0!==t.length?(t.forEach(function(t){var n=document.createElement("article");n.className="story-item",n.innerHTML='\n        <img src="'.concat(t.photoUrl,'" alt="Foto ').concat(t.name,'" class="story-item__image">\n        <div class="story-item__content">\n          <h3 class="story-item__author">').concat(t.name,'</h3>\n          <p class="story-item__date">').concat(m(t.createdAt),'</p>\n          <p class="story-item__description">').concat(t.description.substring(0,100),'...</p>\n          \n          <button class="btn btn-danger delete-favorite-btn" data-id="').concat(t.id,'">\n            Hapus Favorit\n          </button>\n        </div>\n      '),e.appendChild(n)}),this._addDeleteButtonListeners()):e.innerHTML="<p>Anda belum memiliki cerita favorit.</p>"},_addDeleteButtonListeners:function(){var t=this;document.querySelectorAll(".delete-favorite-btn").forEach(function(e){e.addEventListener("click",function(){var e=kt(bt().m(function e(n){var r;return bt().w(function(e){for(;;)switch(e.n){case 0:return n.stopPropagation(),r=n.target.dataset.id,e.n=1,Q(r);case 1:alert("Cerita dihapus dari favorit."),t.afterRender();case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}())})}}};function jt(t){return jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jt(t)}function Ot(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return _t(s,"_invoke",function(n,r,o){var i,c,u,s=0,f=o||[],l=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return i=e,c=0,u=t,d.n=n,a}};function p(n,r){for(c=n,u=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],p=d.p,v=i[2];n>3?(o=v===r)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=p&&((o=n<2&&p<i[1])?(c=0,d.v=r,d.n=i[1]):p<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,d.n=v,c=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&p(f,v),c=f,u=v;(e=c<2?t:u)||!l;){i||(c?c<3?(c>1&&(d.n=-1),p(c,u)):d.n=u:d.v=u);try{if(s=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(l=d.n<0)?u:n.call(r,d))!==a)break}catch(e){i=t,c=1,u=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(_t(e={},r,function(){return this}),e),l=s.prototype=c.prototype=Object.create(f);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,_t(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return u.prototype=s,_t(l,"constructor",s),_t(s,"constructor",u),u.displayName="GeneratorFunction",_t(s,o,"GeneratorFunction"),_t(l),_t(l,o,"Generator"),_t(l,r,function(){return this}),_t(l,"toString",function(){return"[object Generator]"}),(Ot=function(){return{w:i,m:d}})()}function _t(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}_t=function(t,e,n,r){function i(e,n){_t(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},_t(t,e,n,r)}function Tt(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function Pt(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){Tt(i,r,o,a,c,"next",t)}function c(t){Tt(i,r,o,a,c,"throw",t)}a(void 0)})}}function Et(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Lt(r.key),r)}}function Lt(t){var e=function(t){if("object"!=jt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=jt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==jt(e)?e:e+""}function Gt(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return xt(s,"_invoke",function(n,r,o){var i,c,u,s=0,f=o||[],l=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return i=e,c=0,u=t,d.n=n,a}};function p(n,r){for(c=n,u=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],p=d.p,v=i[2];n>3?(o=v===r)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=p&&((o=n<2&&p<i[1])?(c=0,d.v=r,d.n=i[1]):p<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,d.n=v,c=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&p(f,v),c=f,u=v;(e=c<2?t:u)||!l;){i||(c?c<3?(c>1&&(d.n=-1),p(c,u)):d.n=u:d.v=u);try{if(s=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(l=d.n<0)?u:n.call(r,d))!==a)break}catch(e){i=t,c=1,u=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(xt(e={},r,function(){return this}),e),l=s.prototype=c.prototype=Object.create(f);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,xt(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return u.prototype=s,xt(l,"constructor",s),xt(s,"constructor",u),u.displayName="GeneratorFunction",xt(s,o,"GeneratorFunction"),xt(l),xt(l,o,"Generator"),xt(l,r,function(){return this}),xt(l,"toString",function(){return"[object Generator]"}),(Gt=function(){return{w:i,m:d}})()}function xt(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}xt=function(t,e,n,r){function i(e,n){xt(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},xt(t,e,n,r)}function Ft(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function qt(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){Ft(i,r,o,a,c,"next",t)}function c(t){Ft(i,r,o,a,c,"throw",t)}a(void 0)})}}const Ct={requestPermission:function(){var t=this;return qt(Gt().m(function e(){return Gt().w(function(e){for(;;)switch(e.n){case 0:if("Notification"in window){e.n=1;break}return console.error("Browser ini tidak mendukung notifikasi desktop."),e.a(2);case 1:return e.n=2,Notification.requestPermission();case 2:"granted"===e.v?(console.log("Izin notifikasi diberikan."),t._displayGrantedNotification()):console.log("Izin notifikasi ditolak.");case 3:return e.a(2)}},e)}))()},_displayGrantedNotification:function(){var t={body:"Terima kasih telah mengaktifkan notifikasi!",icon:"/icons/icon-96x96.png"};navigator.serviceWorker.ready.then(function(e){e.showNotification("Notifikasi Diaktifkan",t)})},_subscribeToPush:function(){var t=this;return qt(Gt().m(function e(){var n,r,o;return Gt().w(function(e){for(;;)switch(e.p=e.n){case 0:if("PushManager"in window){e.n=1;break}return console.error("Browser ini tidak mendukung Push Manager."),e.a(2);case 1:return e.n=2,navigator.serviceWorker.ready;case 2:return n=e.v,e.p=3,e.n=4,n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:t._urlBase64ToUint8Array("https://story-api.dicoding.dev/v1")});case 4:r=e.v,console.log("Berhasil subscribe:",JSON.stringify(r)),e.n=6;break;case 5:e.p=5,o=e.v,console.error("Gagal subscribe ke push:",o);case 6:return e.a(2)}},e,null,[[3,5]])}))()},_urlBase64ToUint8Array:function(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),n=window.atob(e),r=new Uint8Array(n.length),o=0;o<n.length;++o)r[o]=n.charCodeAt(o);return r}};function Dt(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return At(s,"_invoke",function(n,r,o){var i,c,u,s=0,f=o||[],l=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return i=e,c=0,u=t,d.n=n,a}};function p(n,r){for(c=n,u=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],p=d.p,v=i[2];n>3?(o=v===r)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=p&&((o=n<2&&p<i[1])?(c=0,d.v=r,d.n=i[1]):p<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,d.n=v,c=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&p(f,v),c=f,u=v;(e=c<2?t:u)||!l;){i||(c?c<3?(c>1&&(d.n=-1),p(c,u)):d.n=u:d.v=u);try{if(s=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(l=d.n<0)?u:n.call(r,d))!==a)break}catch(e){i=t,c=1,u=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(At(e={},r,function(){return this}),e),l=s.prototype=c.prototype=Object.create(f);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,At(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return u.prototype=s,At(l,"constructor",s),At(s,"constructor",u),u.displayName="GeneratorFunction",At(s,o,"GeneratorFunction"),At(l),At(l,o,"Generator"),At(l,r,function(){return this}),At(l,"toString",function(){return"[object Generator]"}),(Dt=function(){return{w:i,m:d}})()}function At(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}At=function(t,e,n,r){function i(e,n){At(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},At(t,e,n,r)}function It(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function Bt(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){It(i,r,o,a,c,"next",t)}function c(t){It(i,r,o,a,c,"throw",t)}a(void 0)})}}var Nt=new(function(){return t=function t(e){var n=e.content,r=e.header;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._content=n,this._header=r,o.e(837).then(o.bind(o,837))},e=[{key:"renderPage",value:(a=Pt(Ot().m(function t(){var e,n,r=this;return Ot().w(function(t){for(;;)switch(t.n){case 0:if(this._header.innerHTML="<app-bar></app-bar>",e=i.parseActiveUrlWithCombiner(),!["/","/home","/add-story"].includes(e)||c.A.isLoggedIn()){t.n=1;break}return window.location.hash="#/login",t.a(2);case 1:if(!["/login","/register"].includes(e)||!c.A.isLoggedIn()){t.n=2;break}return window.location.hash="#/home",t.a(2);case 2:if(n=St[e]||St["/"],!document.startViewTransition){t.n=3;break}document.startViewTransition(Pt(Ot().m(function t(){return Ot().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,r._updatePageContent(n);case 1:return t.a(2)}},t)}))),t.n=4;break;case 3:return t.n=4,this._legacyTransition(n);case 4:return t.a(2)}},t,this)})),function(){return a.apply(this,arguments)})},{key:"_legacyTransition",value:(r=Pt(Ot().m(function t(e){return Ot().w(function(t){for(;;)switch(t.n){case 0:return this._content.classList.add("page-transition-out"),t.n=1,new Promise(function(t){return setTimeout(t,300)});case 1:return t.n=2,this._updatePageContent(e);case 2:this._content.classList.remove("page-transition-out");case 3:return t.a(2)}},t,this)})),function(t){return r.apply(this,arguments)})},{key:"_updatePageContent",value:(n=Pt(Ot().m(function t(e){var n;return Ot().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,e.render();case 1:return this._content.innerHTML=t.v,t.n=2,e.afterRender();case 2:t.n=4;break;case 3:t.p=3,n=t.v,console.error("Gagal merender halaman:",n),this._content.innerHTML="<p>Halaman tidak ditemukan atau terjadi error.</p>";case 4:return t.a(2)}},t,this,[[0,3]])})),function(t){return n.apply(this,arguments)})}],e&&Et(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r,a}())({header:document.querySelector(".app-bar"),content:document.querySelector("#main-content")});window.addEventListener("hashchange",function(){Nt.renderPage()}),window.addEventListener("load",Bt(Dt().m(function t(){var e;return Dt().w(function(t){for(;;)switch(t.p=t.n){case 0:if(Nt.renderPage(),!("serviceWorker"in navigator)){t.n=4;break}return t.p=1,t.n=2,navigator.serviceWorker.register("/sw.js");case 2:console.log("Service Worker berhasil didaftarkan."),setTimeout(function(){Ct.requestPermission()},3e3),t.n=4;break;case 3:t.p=3,e=t.v,console.error("Gagal mendaftarkan Service Worker:",e);case 4:return t.a(2)}},t,null,[[1,3]])})))})();
//# sourceMappingURL=app.bundle.js.map